<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>دارک بات | فروشگاه ربات</title>
  <style>
    :root {
      --primary-bg: #0d0d0d;
      --card-bg: #1a1a1a;
      --accent: #ff5722;
      --accent-blue: #2196f3;
      --accent-green: #4CAF50;
      --accent-purple: #9C27B0;
      --accent-gold: #FFD700;
      --text: #fff;
      --text-secondary: #ccc;
      --success: #4CAF50;
      --error: #f44336;
      --warning: #ff9800;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: Tahoma, sans-serif;
      background: var(--primary-bg);
      color: var(--text);
      text-align: center;
      line-height: 1.6;
      padding: 0;
    }
    
    header {
      background: linear-gradient(to right, #ff5722, #ff8a65);
      padding: 20px;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(255, 87, 34, 0.3);
    }
    
    .container {
      max-width: 450px;
      margin: 20px auto;
      padding: 0 15px;
    }
    
    .card {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      margin-bottom: 20px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }
    
    h2, h3 {
      margin-bottom: 15px;
      color: var(--accent);
    }
    
    p {
      margin-bottom: 15px;
      color: var(--text-secondary);
    }
    
    button {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin: 12px 0;
      padding: 15px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: Tahoma, sans-serif;
      position: relative;
      overflow: hidden;
    }
    
    button:after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    button:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    @keyframes ripple {
      0% {
        transform: scale(0, 0);
        opacity: 1;
      }
     20% {
        transform: scale(25, 25);
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: scale(40, 40);
      }
    }
    
    .robika {
      background: var(--accent);
      color: var(--text);
    }
    
    .telegram {
      background: var(--accent-blue);
      color: var(--text);
    }
    
    .war {
      background: var(--accent-purple);
      color: var(--text);
    }
    
    .ai {
      background: var(--accent-gold);
      color: #333;
      font-weight: bold;
    }
    
    .plan {
      background: #333;
      color: var(--text);
    }
    
    .back-btn {
      background: transparent;
      color: var(--text-secondary);
      border: 1px solid var(--text-secondary);
      margin-top: 20px;
    }
    
    .admin-btn {
      background: var(--accent-green);
      color: var(--text);
    }
    
    .status-btn {
      background: var(--accent-blue);
      color: var(--text);
    }
    
    .online-payment {
      background: #4CAF50;
      color: var(--text);
    }
    
    .bank-payment {
      background: #2196F3;
      color: var(--text);
    }
    
    .hidden {
      display: none;
    }
    
    input, select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #444;
      background: #222;
      color: var(--text);
      font-family: Tahoma, sans-serif;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .card-info {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      direction: ltr;
      font-family: monospace;
      font-size: 16px;
    }
    
    .step-indicator {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    
    .step {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #444;
      margin: 0 5px;
    }
    
    .step.active {
      background: var(--accent);
      transform: scale(1.2);
    }
    
    .success {
      color: var(--success);
      font-weight: bold;
    }
    
    .error {
      color: var(--error);
      font-weight: bold;
    }
    
    .warning {
      color: var(--warning);
      font-weight: bold;
    }
    
    .support-icons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 15px;
    }
    
    .support-icons a {
      color: var(--text);
      font-size: 24px;
      transition: color 0.3s ease;
    }
    
    .support-icons a:hover {
      color: var(--accent);
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .price-tag {
      font-size: 14px;
      background: rgba(0, 0, 0, 0.3);
      padding: 3px 8px;
      border-radius: 15px;
    }
    
    .file-upload {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border: 2px dashed #444;
    }
    
    .admin-panel {
      background: #1e3a5f;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
    }
    
    .payment-item {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      text-align: right;
    }
    
    .status-badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 15px;
      font-size: 12px;
      margin: 5px 0;
    }
    
    .status-pending {
      background: var(--warning);
      color: #333;
    }
    
    .status-approved {
      background: var(--success);
      color: white;
    }
    
    .status-rejected {
      background: var(--error);
      color: white;
    }
    
    .payment-options {
      display: flex;
      gap: 10px;
      margin: 15px 0;
    }
    
    .payment-option {
      flex: 1;
      padding: 15px;
      background: #2a2a2a;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .payment-option.selected {
      border-color: var(--accent);
      background: #333;
    }
    
    .payment-option:hover {
      background: #333;
    }
  </style>
</head>
<body>
  <header>🔥 دارک بات 🔥</header>
  
  <div class="container">
    <!-- Step indicator -->
    <div class="step-indicator">
      <div class="step active" id="step1"></div>
      <div class="step" id="step2"></div>
      <div class="step" id="step3"></div>
      <div class="step" id="step4"></div>
    </div>
    
    <!-- Check Status -->
    <div class="status-check hidden" id="status-check">
      <div class="card">
        <h2>پیگیری وضعیت پرداخت</h2>
        <input type="text" id="status-phone" placeholder="شماره تلفن خود را وارد کنید">
        <button onclick="checkStatus()" class="status-btn">
          <i class="fas fa-search"></i> بررسی وضعیت
        </button>
        <div id="status-result"></div>
        <button class="back-btn" onclick="goToMain()">
          <i class="fas fa-arrow-right"></i> بازگشت به صفحه اصلی
        </button>
      </div>
    </div>
    
    <!-- Admin Login -->
    <div class="admin-login hidden" id="admin-login">
      <div class="card">
        <h2>ورود ادمین</h2>
        <input type="text" id="admin-phone" placeholder="شماره تلفن ادمین">
        <button onclick="adminLogin()" class="admin-btn">
          <i class="fas fa-lock"></i> ورود به پنل مدیریت
        </button>
        <button class="back-btn" onclick="goToMain()">
          <i class="fas fa-arrow-right"></i> بازگشت به صفحه اصلی
        </button>
      </div>
    </div>
    
    <!-- Admin Panel -->
    <div class="admin-panel hidden" id="admin-panel">
      <h2><i class="fas fa-crown"></i> پنل مدیریت</h2>
      <div id="pending-payments">
        <!-- Payments will be listed here -->
      </div>
      <button onclick="adminLogout()" class="back-btn">
        <i class="fas fa-sign-out-alt"></i> خروج
      </button>
    </div>
    
    <!-- Step 1: Bot Selection -->
    <div class="options fade-in" id="options">
      <div class="card">
        <h2>انتخاب ربات</h2>
        <button class="robika" onclick="selectBot('robika')">
          <span><i class="fas fa-robot"></i> ربات مدیریت گروه روبیکا</span>
          <span class="price-tag">30,000 تومان</span>
        </button>
        <button class="telegram" onclick="selectBot('telegram')">
          <span><i class="fab fa-telegram"></i> ربات مدیریت گروه تلگرام</span>
          <span class="price-tag">40,000 تومان</span>
        </button>
        <button class="war" onclick="selectBot('war')">
          <span><i class="fas fa-fighter-jet"></i> ربات جنگ جهانی</span>
          <span class="price-tag">50,000 تومان</span>
        </button>
        <button class="ai" onclick="selectBot('ai')">
          <span><i class="fas fa-brain"></i> ربات هوش مصنوعی</span>
          <span class="price-tag">100,000 تومان</span>
        </button>
        
        <div style="margin-top: 20px;">
          <button onclick="showStatusCheck()" class="status-btn">
            <i class="fas fa-search"></i> پیگیری وضعیت پرداخت
          </button>
          <button onclick="showAdminLogin()" class="admin-btn">
            <i class="fas fa-crown"></i> ورود ادمین
          </button>
        </div>
      </div>
    </div>
    
    <!-- Step 2: Plan Selection -->
    <div class="plans hidden" id="plans">
      <div class="card">
        <h2>انتخاب پلن</h2>
        <div id="plan-options">
          <!-- Plans will be dynamically added here -->
        </div>
        <button class="back-btn" onclick="goBack('plans', 'options')">
          <i class="fas fa-arrow-right"></i> بازگشت
        </button>
      </div>
    </div>
    
    <!-- Step 3: Payment Method -->
    <div class="payment-method hidden" id="payment-method">
      <div class="card">
        <h2>روش پرداخت</h2>
        <p>لطفا روش پرداخت خود را انتخاب کنید:</p>
        
        <div class="payment-options">
          <div class="payment-option" onclick="selectPaymentMethod('online')">
            <i class="fas fa-credit-card" style="font-size: 24px; margin-bottom: 10px;"></i>
            <p>پرداخت آنلاین</p>
          </div>
          <div class="payment-option" onclick="selectPaymentMethod('bank')">
            <i class="fas fa-university" style="font-size: 24px; margin-bottom: 10px;"></i>
            <p>پرداخت کارتی</p>
          </div>
        </div>
        
        <div id="payment-online" class="hidden">
          <p>برای پرداخت آنلاین روی دکمه زیر کلیک کنید:</p>
          <button onclick="processOnlinePayment()" class="online-payment">
            <i class="fas fa-credit-card"></i> پرداخت آنلاین
          </button>
        </div>
        
        <div id="payment-bank" class="hidden">
          <p>لطفا مبلغ <span id="bank-amount" class="success">30,000 تومان</span> را به شماره کارت زیر واریز کنید:</p>
          
          <div class="card-info">
            <i class="far fa-credit-card"></i> 5022-2915-8551-0686
            <button onclick="copyCardNumber()" style="margin: 10px auto; padding: 8px; font-size: 12px; width: auto;">
              <i class="far fa-copy"></i> کپی شماره کارت
            </button>
          </div>
          
          <p>بعد از پرداخت، اطلاعات زیر را تکمیل کنید:</p>
          <input type="text" id="phone" placeholder="شماره تلفن شما">
          <input type="text" id="name" placeholder="نام کامل">
          
          <div class="file-upload">
            <p>آپلود فیش واریزی:</p>
            <input type="file" id="receipt" accept="image/*">
          </div>
          
          <button onclick="submitBankPayment()" class="bank-payment">
            <i class="fas fa-check-circle"></i> ثبت اطلاعات و آپلود
          </button>
        </div>
        
        <p id="payment-result"></p>
        
        <button class="back-btn" onclick="goBack('payment-method', 'plans')">
          <i class="fas fa-arrow-right"></i> بازگشت
        </button>
      </div>
    </div>
    
    <!-- Step 4: Verification Code -->
    <div class="verification hidden" id="verification">
      <div class="card">
        <h2>تأیید نهایی</h2>
        <p id="verification-message">پرداخت شما با موفقیت ثبت شد.</p>
        
        <div class="success">
          <p>✅ شماره تلفن: <span id="user-phone">09123456789</span></p>
          <p>✅ نام: <span id="user-name">نام کاربر</span></p>
          <p>✅ ربات: <span id="user-bot">ربات انتخابی</span></p>
          <p>✅ مبلغ: <span id="user-amount">30,000 تومان</span></p>
          <p>✅ روش پرداخت: <span id="user-method">آنلاین</span></p>
        </div>
        
        <div class="warning">
          <p>📞 لطفا برای دریافت ربات و راهنمایی نصب با ادمین تماس بگیرید:</p>
          <p>تلگرام: <b>@TahaDangerm</b></p>
          <p>روبیکا: <b>@GodtahaA</b></p>
        </div>
        
        <button class="back-btn" onclick="goToMain()">
          <i class="fas fa-home"></i> بازگشت به صفحه اصلی
        </button>
      </div>
    </div>
    
    <!-- Support Section -->
    <div class="support">
      <div class="card">
        <h3>پشتیبانی</h3>
        <p>برای راهنمایی بیشتر با ما در ارتباط باشید:</p>
        
        <div class="support-icons">
          <a href="https://t.me/TahaDangerm" target="_blank" title="تلگرام">
            <i class="fab fa-telegram"></i>
          </a>
          <a href="https://rubika.ir/GodtahaA" target="_blank" title="روبیکا">
            <i class="fas fa-comment-dots"></i>
          </a>
        </div>
        
        <p>تلگرام: <b>@TahaDangerm</b></p>
        <p>روبیکا: <b>@GodtahaA</b></p>
      </div>
    </div>
  </div>

  <script>
    // داده‌های ذخیره‌سازی محلی
    let payments = JSON.parse(localStorage.getItem('payments')) || [];
    let adminPhone = "09134145617"; // شماره ادمین ثابت
    
    let selectedBot = "";
    let selectedPlan = "";
    let selectedPrice = 0;
    let userPhone = "";
    let userName = "";
    let paymentMethod = "";
    
    // Update step indicator
    function updateStepIndicator(step) {
      document.querySelectorAll('.step').forEach((el, index) => {
        if (index + 1 <= step) {
          el.classList.add('active');
        } else {
          el.classList.remove('active');
        }
      });
    }
    
    // Go to main page
    function goToMain() {
      hideAllSections();
      document.getElementById('options').classList.remove('hidden');
      updateStepIndicator(1);
    }
    
    // Hide all sections
    function hideAllSections() {
      const sections = ['options', 'plans', 'payment-method', 'verification', 'admin-login', 
                       'admin-panel', 'status-check'];
      sections.forEach(section => {
        document.getElementById(section).classList.add('hidden');
      });
    }
    
    // Show status check
    function showStatusCheck() {
      hideAllSections();
      document.getElementById('status-check').classList.remove('hidden');
    }
    
    // Check status
    function checkStatus() {
      const phone = document.getElementById('status-phone').value;
      const resultDiv = document.getElementById('status-result');
      
      if (!phone) {
        resultDiv.innerHTML = '<p class="error">لطفا شماره تلفن خود را وارد کنید.</p>';
        return;
      }
      
      const userPayments = payments.filter(p => p.phone === phone);
      
      if (userPayments.length === 0) {
        resultDiv.innerHTML = '<p class="error">هیچ پرداختی با این شماره ثبت نشده است.</p>';
        return;
      }
      
      // نمایش آخرین پرداخت کاربر
      const lastPayment = userPayments[userPayments.length - 1];
      
      let statusClass = 'status-pending';
      let statusText = 'در انتظار تایید';
      
      if (lastPayment.status === 'approved') {
        statusClass = 'status-approved';
        statusText = 'تایید شده';
      } else if (lastPayment.status === 'rejected') {
        statusClass = 'status-rejected';
        statusText = 'رد شده';
      }
      
      resultDiv.innerHTML = `
        <div class="payment-item">
          <p><strong>نام:</strong> ${lastPayment.name}</p>
          <p><strong>ربات:</strong> ${lastPayment.bot}</p>
          <p><strong>پلن:</strong> ${lastPayment.plan}</p>
          <p><strong>مبلغ:</strong> ${lastPayment.amount.toLocaleString()} تومان</p>
          <p><strong>روش پرداخت:</strong> ${lastPayment.method}</p>
          <p><strong>زمان:</strong> ${new Date(lastPayment.timestamp).toLocaleString('fa-IR')}</p>
          <p><strong>وضعیت:</strong> <span class="status-badge ${statusClass}">${statusText}</span></p>
        </div>
        <div class="warning">
          <p>📞 لطفا برای دریافت ربات با ادمین تماس بگیرید:</p>
          <p>تلگرام: <b>@TahaDangerm</b></p>
          <p>روبیکا: <b>@GodtahaA</b></p>
        </div>
      `;
    }
    
    // Show admin login
    function showAdminLogin() {
      hideAllSections();
      document.getElementById('admin-login').classList.remove('hidden');
    }
    
    // Admin login
    function adminLogin() {
      const phone = document.getElementById('admin-phone').value;
      
      if (phone === adminPhone) {
        hideAllSections();
        document.getElementById('admin-panel').classList.remove('hidden');
        loadPendingPayments();
      } else {
        alert("شماره تلفن ادمین معتبر نیست!");
      }
    }
    
    // Admin logout
    function adminLogout() {
      hideAllSections();
      document.getElementById('options').classList.remove('hidden');
    }
    
    // Load pending payments for admin
    function loadPendingPayments() {
      const pendingPayments = payments.filter(p => p.status === 'pending');
      const container = document.getElementById('pending-payments');
      
      if (pendingPayments.length === 0) {
        container.innerHTML = '<p>هیچ پرداخت در انتظار تایید وجود ندارد.</p>';
        return;
      }
      
      container.innerHTML = '<h3>پرداخت‌های در انتظار تایید:</h3>';
      
      pendingPayments.forEach((payment, index) => {
        const paymentDiv = document.createElement('div');
        paymentDiv.className = 'payment-item';
        paymentDiv.innerHTML = `
          <p><strong>نام:</strong> ${payment.name}</p>
          <p><strong>تلفن:</strong> ${payment.phone}</p>
          <p><strong>ربات:</strong> ${payment.bot}</p>
          <p><strong>پلن:</strong> ${payment.plan}</p>
          <p><strong>مبلغ:</strong> ${payment.amount.toLocaleString()} تومان</p>
          <p><strong>روش پرداخت:</strong> ${payment.method}</p>
          <p><strong>زمان:</strong> ${new Date(payment.timestamp).toLocaleString('fa-IR')}</p>
          <button onclick="approvePayment(${index})" class="admin-btn" style="width: auto; margin: 5px;">
            <i class="fas fa-check"></i> تایید
          </button>
          <button onclick="rejectPayment(${index})" class="back-btn" style="width: auto; margin: 5px;">
            <i class="fas fa-times"></i> رد
          </button>
        `;
        container.appendChild(paymentDiv);
      });
    }
    
    // Approve payment
    function approvePayment(index) {
      payments[index].status = 'approved';
      localStorage.setItem('payments', JSON.stringify(payments));
      alert('پرداخت تایید شد!');
      loadPendingPayments();
    }
    
    // Reject payment
    function rejectPayment(index) {
      payments[index].status = 'rejected';
      localStorage.setItem('payments', JSON.stringify(payments));
      alert('پرداخت رد شد!');
      loadPendingPayments();
    }
    
    // Select bot type
    function selectBot(bot) {
      selectedBot = bot;
      
      // Set price based on bot selection
      if (bot === 'robika') {
        selectedPrice = 30000;
      } else if (bot === 'telegram') {
        selectedPrice = 40000;
      } else if (bot === 'war') {
        selectedPrice = 50000;
      } else if (bot === 'ai') {
        selectedPrice = 100000;
      }
      
      hideAllSections();
      document.getElementById('plans').classList.remove('hidden');
      
      // نمایش پلن‌های مناسب برای هر ربات
      const planOptions = document.getElementById('plan-options');
      planOptions.innerHTML = '';
      
      if (bot === 'robika' || bot === 'telegram') {
        // برای روبیکا و تلگرام پلن ماهانه
        planOptions.innerHTML = `
          <button class="plan" onclick="selectPlan('یک ماهه', 30000)">
            <span><i class="fas fa-calendar-week"></i> یک ماهه</span>
            <span class="price-tag">30,000 تومان</span>
          </button>
          <button class="plan" onclick="selectPlan('سه ماهه', 60000)">
            <span><i class="fas fa-calendar-alt"></i> سه ماهه</span>
            <span class="price-tag">60,000 تومان</span>
          </button>
          <button class="plan" onclick="selectPlan('نامحدود', 120000)">
            <span><i class="fas fa-infinity"></i> نامحدود</span>
            <span class="price-tag">120,000 تومان</span>
          </button>
        `;
      } else if (bot === 'war') {
        // برای ربات جنگ جهانی فقط یک گزینه
        planOptions.innerHTML = `
          <button class="plan" onclick="selectPlan('یکبار خرید', 50000)">
            <span><i class="fas fa-shopping-cart"></i> خرید ربات جنگ جهانی</span>
            <span class="price-tag">50,000 تومان</span>
          </button>
        `;
      } else if (bot === 'ai') {
        // برای ربات هوش مصنوعی فقط یک گزینه
        planOptions.innerHTML = `
          <button class="plan" onclick="selectPlan('یکبار خرید', 100000)">
            <span><i class="fas fa-shopping-cart"></i> خرید ربات هوش مصنوعی</span>
            <span class="price-tag">100,000 تومان</span>
          </button>
        `;
      }
      
      updateStepIndicator(2);
    }
    
    // Select plan
    function selectPlan(plan, price) {
      selectedPlan = plan;
      selectedPrice = price;
      
      hideAllSections();
      document.getElementById('payment-method').classList.remove('hidden');
      
      // Update amount in payment section
      document.getElementById('bank-amount').textContent = selectedPrice.toLocaleString() + ' تومان';
      
      updateStepIndicator(3);
    }
    
    // Select payment method
    function selectPaymentMethod(method) {
      paymentMethod = method;
      
      // Remove selected class from all options
      document.querySelectorAll('.payment-option').forEach(option => {
        option.classList.remove('selected');
      });
      
      // Add selected class to clicked option
      event.currentTarget.classList.add('selected');
      
      // Show appropriate payment form
      document.getElementById('payment-online').classList.add('hidden');
      document.getElementById('payment-bank').classList.add('hidden');
      
      if (method === 'online') {
        document.getElementById('payment-online').classList.remove('hidden');
      } else if (method === 'bank') {
        document.getElementById('payment-bank').classList.remove('hidden');
      }
    }
    
    // Process online payment
    function processOnlinePayment() {
      // در نسخه واقعی، اینجا کاربر به درگاه پرداخت هدایت می‌شود
      // برای نمونه، ما مستقیماً به مرحله بعد می‌رویم
      
      hideAllSections();
      document.getElementById('verification').classList.remove('hidden');
      
      // ذخیره اطلاعات پرداخت
      const paymentData = {
        name: "پرداخت آنلاین",
        phone: userPhone,
        bot: getBotName(selectedBot),
        botType: selectedBot,
        plan: selectedPlan,
        amount: selectedPrice,
        method: "آنلاین",
        timestamp: new Date().toISOString(),
        status: 'approved' // پرداخت آنلاین مستقیم تایید می‌شود
      };
      
      payments.push(paymentData);
      localStorage.setItem('payments', JSON.stringify(payments));
      
      // نمایش اطلاعات کاربر
      document.getElementById('user-phone').textContent = userPhone;
      document.getElementById('user-name').textContent = "پرداخت کننده";
      document.getElementById('user-bot').textContent = getBotName(selectedBot);
      document.getElementById('user-amount').textContent = selectedPrice.toLocaleString() + ' تومان';
      document.getElementById('user-method').textContent = "آنلاین";
      
      updateStepIndicator(4);
    }
    
    // Submit bank payment
    function submitBankPayment() {
      const phone = document.getElementById('phone').value;
      const name = document.getElementById('name').value;
      const receipt = document.getElementById('receipt').files[0];
      const result = document.getElementById('payment-result');
      
      if (!phone || !name) {
        result.innerHTML = "<span class='error'>❌ لطفا تمام اطلاعات را وارد کنید.</span>";
        return;
      }
      
      if (!isValidPhone(phone)) {
        result.innerHTML = "<span class='error'>❌ شماره وارد شده معتبر نیست.</span>";
        return;
      }
      
      if (!receipt) {
        result.innerHTML = "<span class='error'>❌ لطفا فیش واریزی را آپلود کنید.</span>";
        return;
      }
      
      userPhone = phone;
      userName = name;
      
      // ذخیره اطلاعات پرداخت
      const paymentData = {
        name: name,
        phone: phone,
        bot: getBotName(selectedBot),
        botType: selectedBot,
        plan: selectedPlan,
        amount: selectedPrice,
        method: "کارتی",
        timestamp: new Date().toISOString(),
        status: 'pending'
      };
      
      payments.push(paymentData);
      localStorage.setItem('payments', JSON.stringify(payments));
      
      hideAllSections();
      document.getElementById('verification').classList.remove('hidden');
      
      // نمایش اطلاعات کاربر
      document.getElementById('user-phone').textContent = userPhone;
      document.getElementById('user-name').textContent = userName;
      document.getElementById('user-bot').textContent = getBotName(selectedBot);
      document.getElementById('user-amount').textContent = selectedPrice.toLocaleString() + ' تومان';
      document.getElementById('user-method').textContent = "کارتی";
      document.getElementById('verification-message').textContent = "اطلاعات شما با موفقیت ثبت شد. پس از تأیید پرداخت، با شما تماس گرفته خواهد شد.";
      
      updateStepIndicator(4);
    }
    
    // Go back to previous step
    function goBack(currentStep, previousStep) {
      document.getElementById(currentStep).classList.add('hidden');
      document.getElementById(previousStep).classList.remove('hidden');
      
      if (previousStep === 'options') {
        updateStepIndicator(1);
      } else if (previousStep === 'plans') {
        updateStepIndicator(2);
      } else if (previousStep === 'payment-method') {
        updateStepIndicator(3);
      }
    }
    
    // Validate phone number
    function isValidPhone(phone) {
      const regex = /^09[0-9]{9}$/;
      return regex.test(phone);
    }
    
    // Copy card number to clipboard
    function copyCardNumber() {
      const cardNumber = "5022291585510686";
      navigator.clipboard.writeText(cardNumber).then(() => {
        alert("شماره کارت کپی شد!");
      });
    }
    
    // Get bot name in Persian
    function getBotName(botType) {
      switch(botType) {
        case 'robika': return 'مدیریت گروه روبیکا';
        case 'telegram': return 'مدیریت گروه تلگرام';
        case 'war': return 'جنگ جهانی';
        case 'ai': return 'هوش مصنوعی';
        default: return botType;
      }
    }
  </script>

  <!-- Font Awesome for icons -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
</body>
</html>